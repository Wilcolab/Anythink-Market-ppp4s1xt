/**
 * ZERO-SHOT PROMPT - Enhanced with robust error handling:
 * Make a function to convert text to snake case with proper validation
 */

function toSnakeCase(str) {
  // Input validation
  if (str === null || str === undefined) {
    throw new TypeError('Input cannot be null or undefined');
  }
  
  if (typeof str !== 'string') {
    throw new TypeError(`Input must be a string, received ${typeof str}`);
  }
  
  // Handle empty string
  if (str.trim() === '') {
    return '';
  }
  
  // Convert to snake_case with comprehensive pattern matching
  return str
    .trim()
    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')  // Handle acronyms: XMLParser -> XML_Parser
    .replace(/([a-z\d])([A-Z])/g, '$1_$2')      // camelCase to snake_case
    .replace(/[\s-]+/g, '_')                     // Replace spaces and hyphens
    .replace(/_+/g, '_')                         // Remove consecutive underscores
    .replace(/^_|_$/g, '')                       // Remove leading/trailing underscores
    .toLowerCase();
}

// Example usage:
// toSnakeCase("Hello World") returns "hello_world"
// toSnakeCase("convertThisString") returns "convert_this_string"
// toSnakeCase("already-has-dashes") returns "already_has_dashes"
// toSnakeCase("XMLHttpRequest") returns "xml_http_request"
// toSnakeCase("  trim  spaces  ") returns "trim_spaces"
// toSnakeCase("") returns ""
// toSnakeCase(null) throws TypeError
// toSnakeCase(123) throws TypeError
